# Auth Service Postman 测试指南

本指南说明如何使用Postman测试您的认证服务API。

## 准备工作

1. 确保您的认证服务正在运行
2. 导入测试集合到Postman

## 导入测试集合

1. 打开Postman
2. 点击左上角的"Import"按钮
3. 选择`auth-service-postman-tests.json`文件
4. 点击"Import"完成导入

## 设置环境变量

1. 在Postman中点击右上角的"Environments"下拉菜单
2. 点击"Add"创建新环境
3. 命名为"Auth Service Environment"
4. 添加以下变量:
   - `base_url`: 您的API基础URL (例如: `http://localhost:8080`)
5. 点击"Save"保存环境
6. 从右上角的下拉菜单中选择刚创建的环境

## 运行测试

### 方法1: 单独运行测试

1. 从左侧的集合中选择"Auth Service Tests"
2. 按照以下顺序运行测试:
   - 首先运行"用户注册"测试
   - 然后运行"用户登录"测试
   - 最后运行"使用错误凭据登录"测试
3. 每个测试后查看"Tests"标签页以检查测试结果

### 方法2: 运行整个集合

1. 右键点击"Auth Service Tests"集合
2. 选择"Run collection"
3. 在打开的Runner窗口中，确保所有测试都被选中
4. 点击"Run Auth Service Tests"按钮
5. 查看测试结果

## 测试内容说明

1. **用户注册测试**:
   - 创建新用户
   - 验证注册成功
   - 自动保存用户名和密码到环境变量

2. **用户登录测试**:
   - 使用已注册的用户凭据登录
   - 验证登录成功并返回JWT令牌
   - 验证JWT令牌格式
   - 自动保存JWT令牌到环境变量供后续请求使用

3. **错误登录测试**:
   - 使用错误密码尝试登录
   - 验证返回适当的错误状态码和消息

## 自定义测试

您可以根据需要修改测试:
- 更改测试用户的用户名和密码
- 添加更多断言来验证特定的响应字段
- 添加更多测试场景，如测试用户名格式验证等

## 常见问题排查

- 如果测试失败，请确保:
  1. 认证服务正在运行
  2. `base_url`环境变量设置正确
  3. API端点路径正确
  4. 数据库连接正常
  5. 用户名未被其他测试占用